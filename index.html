<html>
    <body>
        <h1>Welcome to Blackjack!</h1>
        <input id="username" type="text" placeholder="Enter your name">
        <button onclick="connect()">Connect</button>
        <button id="voteButton" style="display: none;" onclick="voteToStart()">Vote to Start Game</button>
        <div id="gameMessage"></div>

        <script>
            let ws;
            let playerName = "";
            
            function connect() {
                playerName = document.getElementById("username").value;
                if (!playerName) {
                    alert("Please enter a name.");
                    return;
                }

                // Update WebSocket URL if hosted publicly
                // ws = new WebSocket("ws://YOUR_PUBLIC_IP:8000/ws");
                ws = new WebSocket("ws://127.0.0.1:8000/ws"); // Use this for local testing
                
                ws.onopen = () => {
                    console.log("Connected to the server");
                    ws.send(playerName);  // Send player name to server when connected
                    document.getElementById("voteButton").style.display = "inline-block"; // Show vote button
                };

                ws.onmessage = (message) => {
                    console.log("Message from server:", message.data);
                    document.getElementById("gameMessage").innerText = message.data;
                };
            }

            function voteToStart() {
                if (ws && ws.readyState === WebSocket.OPEN) {
                    ws.send("vote_start");  // Send vote to start the game
                    console.log("Voted to start the game.");
                }
            }
        </script>
    </body>
</html>
