<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Plague Game</title>
<style>
  body { background: #111; color: #fff; font-family: sans-serif; text-align: center; }
  canvas { background: #222; display: block; margin: 20px auto; border: 2px solid #555; }
</style>
</head>
<body>
<h1>Mini Plague Game</h1>
<p>Green = Healthy, Yellow = Infected, Red = Dead</p>
<canvas id="gameCanvas" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const POP_SIZE = 100;
const INFECTED_START = 3;
const INFECTION_RADIUS = 10;
const INFECTION_CHANCE = 0.2;
const DEATH_CHANCE = 0.01;
const SPEED = 1;

const population = [];

// Initialize population
for (let i = 0; i < POP_SIZE; i++) {
    population.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        dx: (Math.random() - 0.5) * SPEED,
        dy: (Math.random() - 0.5) * SPEED,
        status: i < INFECTED_START ? 'infected' : 'healthy'
    });
}

function update() {
    for (let p of population) {
        // Move people
        p.x += p.dx;
        p.y += p.dy;
        if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
        if (p.y < 0 || p.y > canvas.height) p.dy *= -1;

        // Infection spread
        if (p.status === 'infected') {
            for (let other of population) {
                if (other.status === 'healthy') {
                    const dist = Math.hypot(p.x - other.x, p.y - other.y);
                    if (dist < INFECTION_RADIUS && Math.random() < INFECTION_CHANCE) {
                        other.status = 'infected';
                    }
                }
            }
            // Chance of dying
            if (Math.random() < DEATH_CHANCE) {
                p.status = 'dead';
            }
        }
    }
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (let p of population) {
        if (p.status === 'healthy') ctx.fillStyle = 'green';
        else if (p.status === 'infected') ctx.fillStyle = 'yellow';
        else ctx.fillStyle = 'red';
        ctx.beginPath();
        ctx.arc(p.x, p.y, 5, 0, Math.PI * 2);
        ctx.fill();
    }
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
